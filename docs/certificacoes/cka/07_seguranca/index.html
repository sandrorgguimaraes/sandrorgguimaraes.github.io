<!doctype html><html lang=pt-br class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.101.0"><link rel=alternate type=application/rss+xml href=https://sandrorgguimaraes.github.io/docs/certificacoes/cka/07_seguranca/index.xml><meta name=robots content="index, follow"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Segurança do Cluster | Diário de Bordo</title><meta name=description content="Entendendo como manter e gerenciar um cluster Kubernetes com segurança."><meta property="og:title" content="Segurança do Cluster"><meta property="og:description" content="Entendendo como manter e gerenciar um cluster Kubernetes com segurança."><meta property="og:type" content="website"><meta property="og:url" content="https://sandrorgguimaraes.github.io/docs/certificacoes/cka/07_seguranca/"><meta itemprop=name content="Segurança do Cluster"><meta itemprop=description content="Entendendo como manter e gerenciar um cluster Kubernetes com segurança."><meta name=twitter:card content="summary"><meta name=twitter:title content="Segurança do Cluster"><meta name=twitter:description content="Entendendo como manter e gerenciar um cluster Kubernetes com segurança."><link rel=preload href=/scss/main.min.c58ce5d45149df8e10859c3eb1022295682982407b61dc69aa80c9ba066ffb49.css as=style><link href=/scss/main.min.c58ce5d45149df8e10859c3eb1022295682982407b61dc69aa80c9ba066ffb49.css rel=stylesheet integrity><script src=https://code.jquery.com/jquery-3.6.0.min.js integrity=sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK crossorigin=anonymous></script>
<script src=https://unpkg.com/lunr@2.3.9/lunr.min.js integrity=sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MPCHWKW6D6"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-MPCHWKW6D6",{anonymize_ip:!1})}</script></head><body class=td-section><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo></span><span class=font-weight-bold>Diário de Bordo</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/ficaadica/><span>#FicaaDica</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><i class="fas fa-blog"></i><span>Vivendo & Aprendendo</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><i class='fas fa-book'></i><span class=active>Colocando em prática</span></a></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Buscar no site…" aria-label="Buscar no site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.aaec1fafe174e4a8a04b752db9adb247.json data-offline-search-base-href=/ data-offline-search-max-results=10></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Buscar no site…" aria-label="Buscar no site…" autocomplete=off data-offline-search-index-json-src=/offline-search-index.aaec1fafe174e4a8a04b752db9adb247.json data-offline-search-base-href=/ data-offline-search-max-results=10>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="collapse td-sidebar-nav foldable-nav" id=td-section-nav><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docs-li><a href=/docs/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-docs><span>Colocando em prática</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docsfazap-li><input type=checkbox id=m-docsfazap-check>
<label for=m-docsfazap-check><a href=/docs/fazap/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsfazap><span>Fazendo e aprendendo</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsfazaptemplate-vm-li><input type=checkbox id=m-docsfazaptemplate-vm-check>
<label for=m-docsfazaptemplate-vm-check><a href=/docs/fazap/template-vm/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsfazaptemplate-vm><span>Template de VM's</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docsfazapterraform-li><input type=checkbox id=m-docsfazapterraform-check>
<label for=m-docsfazapterraform-check><a href=/docs/fazap/terraform/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docsfazapterraform><span>Terraform</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docstrilhadeestudo-li><input type=checkbox id=m-docstrilhadeestudo-check>
<label for=m-docstrilhadeestudo-check><a href=/docs/trilhadeestudo/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docstrilhadeestudo><span>Trilha de Estudos</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-docstrilhadeestudodiario-de-bordo-v1-li><input type=checkbox id=m-docstrilhadeestudodiario-de-bordo-v1-check>
<label for=m-docstrilhadeestudodiario-de-bordo-v1-check><a href=/docs/trilhadeestudo/diario-de-bordo-v1/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docstrilhadeestudodiario-de-bordo-v1><span>Data Warehouse</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstrilhadeestudodiario-de-bordo-v1visao-geral-li><input type=checkbox id=m-docstrilhadeestudodiario-de-bordo-v1visao-geral-check>
<label for=m-docstrilhadeestudodiario-de-bordo-v1visao-geral-check><a href=/docs/trilhadeestudo/diario-de-bordo-v1/visao-geral/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docstrilhadeestudodiario-de-bordo-v1visao-geral><span>Visão geral</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstrilhadeestudodiario-de-bordo-v1modelagem-li><input type=checkbox id=m-docstrilhadeestudodiario-de-bordo-v1modelagem-check>
<label for=m-docstrilhadeestudodiario-de-bordo-v1modelagem-check><a href=/docs/trilhadeestudo/diario-de-bordo-v1/modelagem/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docstrilhadeestudodiario-de-bordo-v1modelagem><span>Modelagem Multidimensional</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docscertificacoes-li><input type=checkbox id=m-docscertificacoes-check checked>
<label for=m-docscertificacoes-check><a href=/docs/certificacoes/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscertificacoes><span>Partiu Certificação!</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-docscertificacoescka-li><input type=checkbox id=m-docscertificacoescka-check checked>
<label for=m-docscertificacoescka-check><a href=/docs/certificacoes/cka/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscertificacoescka><span>Certified Kubernetes Administrator (CKA)</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscertificacoescka01_componentes-li><input type=checkbox id=m-docscertificacoescka01_componentes-check>
<label for=m-docscertificacoescka01_componentes-check><a href=/docs/certificacoes/cka/01_componentes/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscertificacoescka01_componentes><span>Componentes Básicos</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscertificacoescka02_objetos-li><input type=checkbox id=m-docscertificacoescka02_objetos-check>
<label for=m-docscertificacoescka02_objetos-check><a href=/docs/certificacoes/cka/02_objetos/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscertificacoescka02_objetos><span>Objetos Básicos</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscertificacoescka03_agendamento-li><input type=checkbox id=m-docscertificacoescka03_agendamento-check>
<label for=m-docscertificacoescka03_agendamento-check><a href=/docs/certificacoes/cka/03_agendamento/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscertificacoescka03_agendamento><span>Agendamento</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscertificacoescka04_log_monitoracao-li><input type=checkbox id=m-docscertificacoescka04_log_monitoracao-check>
<label for=m-docscertificacoescka04_log_monitoracao-check><a href=/docs/certificacoes/cka/04_log_monitoracao/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscertificacoescka04_log_monitoracao><span>Log & Monitoração</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscertificacoescka05_gerenciar_apps-li><input type=checkbox id=m-docscertificacoescka05_gerenciar_apps-check>
<label for=m-docscertificacoescka05_gerenciar_apps-check><a href=/docs/certificacoes/cka/05_gerenciar_apps/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscertificacoescka05_gerenciar_apps><span>Gerenciar Ciclos de Vida de Aplicações</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscertificacoescka06_manutencao_cluster-li><input type=checkbox id=m-docscertificacoescka06_manutencao_cluster-check>
<label for=m-docscertificacoescka06_manutencao_cluster-check><a href=/docs/certificacoes/cka/06_manutencao_cluster/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docscertificacoescka06_manutencao_cluster><span>Manutenção do Cluster</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docscertificacoescka07_seguranca-li><input type=checkbox id=m-docscertificacoescka07_seguranca-check>
<label for=m-docscertificacoescka07_seguranca-check><a href=/docs/certificacoes/cka/07_seguranca/ class="align-left pl-0 active td-sidebar-link td-sidebar-link__section" id=m-docscertificacoescka07_seguranca><span class=td-sidebar-nav-active-item>Segurança do Cluster</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-docstodo-li><input type=checkbox id=m-docstodo-check>
<label for=m-docstodo-check><a href=/docs/todo/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-docstodo><span>TODO: A fazer</span></a></label></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="taxonomy taxonomy-terms-cloud"><h5 class=taxonomy-title>O que há nesta página</h5></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#a-segurança-no-kubernetes>A Segurança no Kubernetes</a></li><li><a href=#autenticação>Autenticação</a></li><li><a href=#conceitos-básicos-sobre-tls>Conceitos básicos sobre TLS</a></li><li><a href=#tls-no-kubernetes>TLS no Kubernetes</a></li><li><a href=#certificates-api--api-de-certificados>Certificates API / API de Certificados</a></li><li><a href=#kubeconfig>KubeConfig</a></li><li><a href=#api-groups--grupos-de-api>API Groups / Grupos de API</a></li><li><a href=#autorização>Autorização</a></li><li><a href=#rbac-role-based-access-control>RBAC (Role-Based Access Control)</a></li><li><a href=#cluster-roles-e-role-bindings>Cluster Roles e Role Bindings</a></li><li><a href=#services-accounts--contas-de-serviços>Services Accounts / Contas de Serviços</a></li><li><a href=#segurança-de-imagens>Segurança de Imagens</a></li><li><a href=#security-context-ou-contexto-de-segurança>Security Context ou Contexto de Segurança</a></li><li><a href=#network-policy>Network Policy</a></li></ul></nav></div><div class="taxonomy taxonomy-terms-cloud"><h5 class=taxonomy-title>Colabore</h5></div><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/sandrorgguimaraes/sandrorgguimaraes.github.io/tree/main/content/pt-br/docs/certificacoes/cka/07_seguranca/_index.md class=td-page-meta--view target=_blank rel=noopener><i class="fa fa-file-alt fa-fw"></i> Ver código da página</a>
<a href=https://github.com/sandrorgguimaraes/sandrorgguimaraes.github.io/edit/main/content/pt-br/docs/certificacoes/cka/07_seguranca/_index.md class=td-page-meta--edit target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Editar essa página</a>
<a href="https://github.com/sandrorgguimaraes/sandrorgguimaraes.github.io/new/main/content/pt-br/docs/certificacoes/cka/07_seguranca/_index.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class=td-page-meta--child target=_blank rel=noopener><i class="fa fa-edit fa-fw"></i> Criar uma subpágina</a>
<a href="https://github.com/sandrorgguimaraes/sandrorgguimaraes.github.io/issues/new?title=Seguran%c3%a7a%20do%20Cluster" class=td-page-meta--issue target=_blank rel=noopener><i class="fab fa-github fa-fw"></i> Relatar um problema de documentação</a></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=https://sandrorgguimaraes.github.io/docs/>Colocando em prática</a></li><li class=breadcrumb-item><a href=https://sandrorgguimaraes.github.io/docs/certificacoes/>Partiu Certificação!</a></li><li class=breadcrumb-item><a href=https://sandrorgguimaraes.github.io/docs/certificacoes/cka/>Certified Kubernetes Administrator (CKA)</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://sandrorgguimaraes.github.io/docs/certificacoes/cka/07_seguranca/>Segurança do Cluster</a></li></ol></nav><div class=td-content><h1>Segurança do Cluster</h1><div class=lead>Entendendo como manter e gerenciar um cluster Kubernetes com segurança.</div><header class=article-meta><p class=reading-time><i class="fa fa-clock" aria-hidden=true></i>&nbsp; 8 minute read &nbsp;</p></header><p>Em linhas gerais o que veremos a seguir é a aplicação do modelo <code>4C's da segurança nativa da nuvem</code>, não necessariamente na ordem apresentada.</p><p><div class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:790px><img class=card-img-top src=/docs/certificacoes/cka/07_seguranca/4c_hubb291a1abaef25ea02932d8768e7b07a_49564_800x450_fit_box_3.png width=780 height=450><div class="card-body px-0 pt-2 pb-0"><p class=card-text></p></div></div>Fonte.: <a href=https://kubernetes.io/docs/concepts/security/overview/#the-4c-s-of-cloud-native-security target=_blank rel=noopener>Doc K8S — Visão geral da segurança nativa da nuvem</a>
.</p><h2 id=a-segurança-no-kubernetes>A Segurança no Kubernetes</h2><p>O <a href=../01_componentes/>Kubernetes é formado por Nodes</a>
, portanto o primeiro passo é garantir a segurança dos mesmos, <em>desabilitando</em> a autenticação por senha e <em>habilitando</em> a autenticação por chave SSH;</p><p>Como a comunicação dentro de um cluster Kubernetes, os comandos, o gerenciamento, etc. passa pelo API Server, não podemos esquecer:</p><div class="pageinfo pageinfo-primary"><p>API Server Seguro == Kubernetes Seguro</p></div><p>Para manter a segurança no acesso ao API Server, precisamos pensar em:</p><ul><li>Quem pode acessar (<em>Autenticação</em>) e;</li><li>O que pode fazer (<em>Autorização</em>);</li></ul><p>Para garantir a segurança nas comunicações entre os componentes do cluster é fundamental o <em>uso do TLS</em>.</p><p>E como a premissa do Kubernetes é que todos os Pods podem se comunicar entre si, temos as <em>Network Policies</em> para implementar um controle nestas comunicações.</p><blockquote><p>Link&rsquo;s úteis:</p><ul><li><a href=https://kubernetes.io/docs/concepts/security/ target=_blank rel=noopener>Doc K8S - Conceitos - Segurança</a></li></ul></blockquote><h2 id=autenticação>Autenticação</h2><blockquote><p>Link&rsquo;s úteis:</p><ul><li><a href=https://kubernetes.io/docs/concepts/security/ target=_blank rel=noopener>Doc K8S - Conceitos - Segurança</a></li></ul></blockquote><h2 id=conceitos-básicos-sobre-tls>Conceitos básicos sobre TLS</h2><p>O <a href=https://en.wikipedia.org/wiki/Transport_Layer_Security target=_blank rel=noopener><strong>TLS</strong> (<em>Transport Layer Security</em>)</a>
é um protocolo de <a href=https://en.wikipedia.org/wiki/Cryptography target=_blank rel=noopener>criptografia</a>
projetado para garantir a privacidade (confidencialidade), integridade e autenticidade na comunicação em uma rede de computadores através do uso de <a href=https://en.wikipedia.org/wiki/Public_key_certificate target=_blank rel=noopener>certificados digitais</a>
, ele é a base do <a href=https://en.wikipedia.org/wiki/HTTPS target=_blank rel=noopener><strong>HTTPS</strong> (<em>Hypertext Transfer Protocol Secure</em>)</a>
.</p><blockquote><p>Link&rsquo;s úteis:</p><ul><li><a href=https://cryptoid.com.br/banco-de-noticias/29196criptografia-simetrica-e-assimetrica/ target=_blank rel=noopener>Criptografia Simétrica e Assimétrica: Qual a diferença entre elas?</a></li><li><a href=https://cryptoid.com.br/banco-de-noticias/o-que-e-ssl-tls-e-por-que-e-hora-de-atualizar-para-tls-1-3/ target=_blank rel=noopener>O que é SSL e TLS? E por que é hora de atualizar para TLS 1.3?</a></li><li><a href=https://en.wikipedia.org/wiki/Public_key_infrastructure target=_blank rel=noopener>PKI - Public Key Infrastructure</a></li><li><a href=https://www.openssl.org/docs/ target=_blank rel=noopener>OpenSSL Project</a></li></ul></blockquote><h2 id=tls-no-kubernetes>TLS no Kubernetes</h2><p>No Kubernetes para garantir a comunicação segura e confiável entre os componentes nos Worker Nodes, o <a href=http://localhost:1313/docs/certificacoes/cka/01_componentes/#kubelet target=_blank rel=noopener>kubelet</a>
e o <a href=http://localhost:1313/docs/certificacoes/cka/01_componentes/#kube-proxy target=_blank rel=noopener>kube-proxy</a>
, e os componentes no <a href=../01_componentes/#componentes-dos-master-nodes-ou-control-plane>Control Plane</a>
, principalmente o <a href=http://localhost:1313/docs/certificacoes/cka/01_componentes/#api-server target=_blank rel=noopener>kube-apiserver</a>
é altamente recomendável usar certificados TLS.</p><p><div class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:838px><img class=card-img-top src=/docs/certificacoes/cka/07_seguranca/tls_hu08e91078096c6b59cf5f3c1362f8098d_152827_861x560_fit_box_3.png width=828 height=472><div class="card-body px-0 pt-2 pb-0"><p class=card-text></p></div></div>Fonte.: <a href=https://github.com/kodekloudhub/certified-kubernetes-administrator-course/blob/master/docs/07-Security/06-TLS-in-Kubernetes.md target=_blank rel=noopener>Curso - Certified Kubernetes Administrator (CKA) with Practice Tests</a>
.</p><blockquote><p>Link&rsquo;s úteis:</p><ul><li><a href=https://kubernetes.io/docs/reference/access-authn-authz/kubelet-tls-bootstrapping/ target=_blank rel=noopener>Doc K8S - Referência - Controle de acesso à API - Inicialização de TLS</a></li><li><a href=https://kubernetes.io/docs/setup/best-practices/certificates/ target=_blank rel=noopener>Doc K8S - Começando - Melhores Práticas - Certificados e requisitos de PKI</a></li><li><a href=https://kubernetes.io/docs/tasks/tls/managing-tls-in-a-cluster/ target=_blank rel=noopener>Doc K8S - Tarefas - TLS - Gerenciar certificados TLS em um cluster</a></li><li><a href=https://kubernetes.io/docs/tasks/administer-cluster/kubeadm/kubeadm-certs/ target=_blank rel=noopener>Doc K8S - Tarefas - Administrar um cluster - Administração com kubeadm - Gerenciamento de certificados com kubeadm</a></li><li><a href=https://kubernetes.io/docs/setup/best-practices/certificates/ target=_blank rel=noopener>Curso - Certified Kubernetes Administrator (CKA) with Practice Tests - TLS in kubernetes - Certificate Creation</a></li></ul></blockquote><h2 id=certificates-api--api-de-certificados>Certificates API / API de Certificados</h2><p>A API de certificados permite a automação do provisionamento de credenciais X.509 fornecendo uma interface programática para clientes da API Kubernetes solicitarem e obterem certificados X.509 de uma Autoridade de Certificação (CA).</p><p>Um recurso <code>CertificateSigningRequest</code> (CSR) é usado para solicitar que um certificado seja assinado por um assinante indicado, após o qual a solicitação pode ser aprovada ou negada antes de ser finalmente assinada.</p><blockquote><p>Link&rsquo;s úteis:</p><ul><li><a href=https://kubernetes.io/docs/reference/access-authn-authz/certificate-signing-requests/ target=_blank rel=noopener>Doc K8S - Referência - Controle de acesso à API - Solicitações de assinatura de certificado</a></li><li><a href=https://kubernetes.io/docs/tasks/tls/managing-tls-in-a-cluster/ target=_blank rel=noopener>Doc K8S - Tarefas - TLS - Gerenciar certificados TLS em um cluster</a></li></ul></blockquote><h2 id=kubeconfig>KubeConfig</h2><p>Utilize arquivos <code>kubeconfig</code> para organizar informações sobre clusters, usuários, namespaces e mecanismos de autenticação. A ferramenta de linha de comando <code>kubectl</code> faz uso dos arquivos <code>kubeconfig</code> para encontrar as informações necessárias para escolher e se comunicar com o serviço de API de um cluster.</p><p>Por padrão, o <code>kubectl</code> procura por um arquivo de nome <code>config</code> no diretório <code>$HOME/.kube</code>. Você pode especificar outros arquivos kubeconfig através da variável de ambiente <code>KUBECONFIG</code> ou adicionando a opção <code>--kubeconfig</code>.</p><blockquote><p>Link&rsquo;s úteis:</p><ul><li><a href=https://kubernetes.io/pt-br/docs/concepts/configuration/organize-cluster-access-kubeconfig/ target=_blank rel=noopener>Doc K8S - Conceitos - Configuração - Organizando o acesso ao cluster usando arquivos kubeconfig</a></li></ul></blockquote><h2 id=api-groups--grupos-de-api>API Groups / Grupos de API</h2><p>Os grupos de API facilitam a extensão da API do Kubernetes. O grupo de APIs é especificado em um caminho <code>REST</code> e no campo <code>apiVersion</code> de um objeto serializado.</p><p>Existem vários grupos de API no Kubernetes:</p><ul><li>O grupo principal ou <code>core</code> (também chamado de legado) é encontrado no caminho REST <code>/api/v1</code>. O grupo principal não é especificado como parte do campo <code>apiVersion</code>, por exemplo, <code>apiVersion: v1</code>.</li></ul><p><div class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:547px><img class=card-img-top src=/docs/certificacoes/cka/07_seguranca/api5_hucb6c4e8aca6cad6c6f1e289d5f01a92a_120222_861x560_fit_box_3.png width=537 height=409><div class="card-body px-0 pt-2 pb-0"><p class=card-text></p></div></div>Fonte.: <a href=https://github.com/kodekloudhub/certified-kubernetes-administrator-course/blob/master/docs/07-Security/15-API-Groups.md target=_blank rel=noopener>Curso - Certified Kubernetes Administrator (CKA) with Practice Tests</a>
.</p><ul><li>Os grupos nomeados estão no caminho REST <code>/apis/$GROUP_NAME/$VERSION</code> e usam <code>apiVersion: $GROUP_NAME/$VERSION</code> (por exemplo, <code>apiVersion: batch/v1</code>). Podemos encontrar a lista completa de grupos de API compatíveis na <a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.24/#-strong-api-groups-strong- target=_blank rel=noopener>referência da API do Kubernetes</a>
.</li></ul><p><div class="card rounded p-2 td-post-card mb-4 mt-4" style=max-width:871px><img class=card-img-top src=/docs/certificacoes/cka/07_seguranca/api6_hu50a1f89d54766dfc4e5965dbd3ed2ee6_267325_861x560_fit_box_3.png width=861 height=479><div class="card-body px-0 pt-2 pb-0"><p class=card-text></p></div></div>Fonte.: <a href=https://github.com/kodekloudhub/certified-kubernetes-administrator-course/blob/master/docs/07-Security/15-API-Groups.md target=_blank rel=noopener>Curso - Certified Kubernetes Administrator (CKA) with Practice Tests</a>
.</p><blockquote><p>Link&rsquo;s úteis:</p><ul><li><a href=https://kubernetes.io/docs/concepts/overview/kubernetes-api/ target=_blank rel=noopener>Doc K8S - Conceitos - Visão geral - A API do Kubernetes</a></li><li><a href=https://kubernetes.io/docs/reference/using-api/ target=_blank rel=noopener>Doc K8S - Referência - Configuração - Visão geral da API</a></li><li><a href=https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.24/ target=_blank rel=noopener>Doc K8S - Referência - API do Kubernetes</a></li></ul></blockquote><h2 id=autorização>Autorização</h2><p>O Kubernetes autoriza solicitações de API usando o API Server. Ele avalia todos os atributos de solicitação em relação a todas as políticas e permite ou nega a solicitação. Todas as partes de uma solicitação de API devem ser permitidas por alguma política para prosseguir. <em>Isso significa que as permissões são negadas por padrão</em>.</p><p>Quando vários módulos de autorização são configurados, cada um é verificado em sequência. Se algum autorizador aprovar ou negar um pedido, <em>essa decisão é imediatamente devolvida</em> e <em>nenhum outro autorizador é consultado</em>. Se todos os módulos não tiverem opinião sobre a solicitação, <em>a solicitação será negada</em>. Uma negação retorna um código de status HTTP 403.</p><blockquote><p>Link&rsquo;s úteis:</p><ul><li><a href=https://kubernetes.io/docs/reference/access-authn-authz/authorization/ target=_blank rel=noopener>Doc K8S - Referência - Controle de acesso à API - Visão geral da autorização</a></li></ul></blockquote><h2 id=rbac-role-based-access-control>RBAC (Role-Based Access Control)</h2><p>O <strong>RBAC</strong> (<em>Role-Based Access Control</em> ou Controle de Acesso Baseado em Função) é um método de regular o acesso a recursos de computador ou rede com base nas funções de usuários individuais em sua organização.</p><p>A autorização <strong>RBAC</strong> usa o <code>rbac.authorization.k8s.io</code> <a href=#grupos-de-api>Grupo de API</a>
para orientar as decisões de autorização, permitindo configurar políticas dinamicamente por meio da API do Kubernetes.</p><p>Para habilitar o <strong>RBAC</strong>, inicie o API Server com o sinalizador <code>--authorization-modes</code> definido para uma lista separada por vírgulas que inclua <code>RBAC</code>, por exemplo:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>kube-apiserver --authorization-mode<span style=color:#f92672>=</span>Example,RBAC --other-options --more-options
</span></span></code></pre></div><blockquote><p>Link&rsquo;s úteis:</p><ul><li><a href=https://kubernetes.io/docs/reference/access-authn-authz/rbac/ target=_blank rel=noopener>Doc K8S - Referência - Controle de acesso à API - Usando autorização RBAC</a></li><li><a href=https://kubernetes.io/docs/reference/access-authn-authz/rbac/#command-line-utilities target=_blank rel=noopener>Doc K8S - Referência - Controle de acesso à API - Usando autorização RBAC # Utilitários de linha de comando</a></li></ul></blockquote><h2 id=cluster-roles-e-role-bindings>Cluster Roles e Role Bindings</h2><p>Uma <code>Role</code> ou <code>ClusterRole</code> <a href=#rbac-role-based-access-control>RBAC</a>
contém regras que representam um conjunto de permissões. <em>As permissões são puramente aditivas</em> (não há regras de &ldquo;negação&rdquo;).</p><ul><li>Uma <code>Role</code> sempre define permissões em um determinado <code>namespace</code>; ao criar uma <code>Role</code>, precisa ser especificado o <code>namespace</code> ao qual ela pertence.</li><li><code>ClusterRole</code>, por outro lado, é um recurso <em>sem namespace</em>, se aplica ao cluster inteiro.</li></ul><p>Os recursos têm nomes diferentes (<code>Role</code> e <code>ClusterRole</code>) porque um objeto Kubernetes sempre precisa ter namespace ou não; não pode ser os dois.</p><blockquote><p>Link&rsquo;s úteis:</p><ul><li><a href=https://kubernetes.io/docs/reference/access-authn-authz/rbac/#role-and-clusterrole target=_blank rel=noopener>Doc K8S - Referência - Controle de acesso à API - Usando autorização RBAC # Role e ClusterRole</a></li><li><a href=https://kubernetes.io/docs/reference/access-authn-authz/rbac/#command-line-utilities target=_blank rel=noopener>Doc K8S - Referência - Controle de acesso à API - Usando autorização RBAC # Utilitários de linha de comando</a></li></ul></blockquote><h2 id=services-accounts--contas-de-serviços>Services Accounts / Contas de Serviços</h2><p>Segue abaixo algumas caracteristicas das <em>Services Accounts</em> ou Contas de Serviço:</p><ul><li>São para processos, que são executados em pods.</li><li>São vinculadas a um namespace.</li><li>Processo de criação mais leve, permitindo que os usuários do cluster criem contas de serviço para tarefas específicas seguindo o princípio de privilégio mínimo.</li></ul><blockquote><p>Link&rsquo;s úteis:</p><ul><li><a href=https://kubernetes.io/docs/reference/access-authn-authz/service-accounts-admin/ target=_blank rel=noopener>Doc K8S - Referência - Controle de acesso à API - Como gerenciar Services Accounts</a></li><li><a href=https://kubernetes.io/docs/tasks/configure-pod-container/configure-service-account/ target=_blank rel=noopener>Doc K8S - Tarefas - Configurar pods e contêineres - Configurar contas de serviço para pods</a></li></ul></blockquote><h2 id=segurança-de-imagens>Segurança de Imagens</h2><p>Uma imagem de container representa dados binários que encapsulam um aplicativo e todas as suas dependências de software, são pacotes de software executáveis ​​que podem ser executados de forma independente e que fazem suposições muito bem definidas sobre seu ambiente de tempo de execução.</p><p>Normalmente se cria uma imagem de contêiner de seu aplicativo e a envia para um registro antes de se referir a ela em um Pod.</p><blockquote><p>Link&rsquo;s úteis:</p><ul><li><a href=https://kubernetes.io/docs/concepts/containers/images/ target=_blank rel=noopener>Doc K8S - Conceitos - Containers - Imagens</a></li></ul></blockquote><h2 id=security-context-ou-contexto-de-segurança>Security Context ou Contexto de Segurança</h2><p>Os <em>Security Contexts</em> configuram Pods e Containers em tempo de execução.</p><p>Os <em>Security Contexts</em> são definidos como parte das especificações do Pod e do Container no manifesto do Pod e representam parâmetros para o tempo de execução do container.</p><blockquote><p>Link&rsquo;s úteis:</p><ul><li><a href=https://kubernetes.io/docs/tasks/configure-pod-container/security-context/ target=_blank rel=noopener>Doc K8S - Tarefas - Configurar Pods e Containers - Configurar um Security Context para um Pod ou Container</a></li></ul></blockquote><h2 id=network-policy>Network Policy</h2><p>Por padrão todas as conexões de entrada e saída em um Pod são permitidas, as <em>Network Policies</em> implementam um controle no fluxo do tráfego tanto de entrada <code>Ingress</code>, quanto de saída <code>Egress</code>.</p><p>As <em>Network Policies</em> não entram em conflito, elas são aditivas. Se alguma política ou políticas se aplicarem a um determinado Pod para uma determinada direção, as conexões permitidas nessa direção desse Pod serão a união do que as políticas aplicáveis ​​permitem. Assim, a ordem de avaliação não afeta o resultado da política.</p><p>Para que uma conexão de um Pod de origem a um Pod de destino seja permitida, a política de saída no Pod de origem e a política de entrada no Pod de destino precisam permitir a conexão, se um dos lados não permitir a conexão, ela não acontecerá.</p><blockquote><p>Link&rsquo;s úteis:</p><ul><li><a href=https://kubernetes.io/docs/concepts/services-networking/network-policies/ target=_blank rel=noopener>Doc K8S - Conceitos - Serviços, balanceamento de carga e rede - Network Policy</a></li></ul></blockquote><div class=section-index></div><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Gostou desta página?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Sim</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">Não</button><p class="feedback--response feedback--response-yes">Que bom, que gostou! Por favor, <a href="https://github.com/sandrorgguimaraes/sandrorgguimaraes.github.io/issues/new?title=Sugestoes">tem algo que podemos melhorar</a>?</p><p class="feedback--response feedback--response-no">Que pena! Por favor, <a href="https://github.com/sandrorgguimaraes/sandrorgguimaraes.github.io/issues/new?title=Melhorias">me diga o que podemos fazer pra melhorar</a>. Obrigado!</p></div><script>const yesButton=document.querySelector(".feedback--answer-yes"),noButton=document.querySelector(".feedback--answer-no"),yesResponse=document.querySelector(".feedback--response-yes"),noResponse=document.querySelector(".feedback--response-no"),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=e=>{if(typeof ga!="function")return;const t={command:"send",hitType:"event",category:"Helpful",action:"click",label:window.location.pathname,value:e};ga(t.command,t.hitType,t.category,t.action,t.label,t.value)};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(1)}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(0)})</script><br><div class="text-muted mt-5 pt-3 border-top">Última modificação 21 de Jun de 2022: <a href=https://github.com/sandrorgguimaraes/sandrorgguimaraes.github.io/commit/f3bfe5947bfe7d523ab0bd5a7b21109c92cf046c>Atualizado 'Certificações - CKA - Segurança'. (f3bfe59)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=LinkedIn aria-label=LinkedIn><a class=text-white target=_blank rel=noopener href=https://www.linkedin.com/in/sandrorgguimaraes/ aria-label=LinkedIn><i class="fab fa-linkedin"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel=noopener href=https://www.twitter.com/sandrorogerio/ aria-label=Twitter><i class="fab fa-twitter-square"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel=noopener href=https://github.com/sandrorgguimaraes/ aria-label=GitHub><i class="fab fa-github-square"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 Sandro Rogério Galvão Guimarães Todos os direitos reservados</small></div></div></div></footer></div><script src=https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js integrity=sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA==" crossorigin=anonymous></script>
<script src=/js/tabpane-persist.js></script>
<script src=/js/main.min.91798a335c881f1b6b805085ba4aa22d1dbd2b0b18d105d05189fa104ddae350.js integrity="sha256-kXmKM1yIHxtrgFCFukqiLR29KwsY0QXQUYn6EE3a41A=" crossorigin=anonymous></script></body></html>