<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Diário de Bordo – modelagem multidimensional</title><link>https://sandrorgguimaraes.github.io/tags/modelagem-multidimensional/</link><description>Recent content in modelagem multidimensional on Diário de Bordo</description><generator>Hugo -- gohugo.io</generator><language>pt-br</language><lastBuildDate>Sat, 05 Mar 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://sandrorgguimaraes.github.io/tags/modelagem-multidimensional/index.xml" rel="self" type="application/rss+xml"/><item><title>Docs: Modelagem Multidimensional</title><link>https://sandrorgguimaraes.github.io/docs/trilhadeestudo/diario-de-bordo-v1/modelagem/</link><pubDate>Sat, 05 Mar 2022 00:00:00 +0000</pubDate><guid>https://sandrorgguimaraes.github.io/docs/trilhadeestudo/diario-de-bordo-v1/modelagem/</guid><description>
&lt;h2 id="cubo-de-dados">Cubo de Dados&lt;/h2>
&lt;p>Um &lt;a href="https://sandrorgguimaraes.github.io/docs/trilhadeestudo/diario-de-bordo-v1/visao-geral/#datawarehouse-dw--data-mart-dm">&lt;strong>DW&lt;/strong>&lt;/a>
tem como principal objetivo servir de repositório para a analise de grandes massas de dados através de consultas &lt;a href="https://sandrorgguimaraes.github.io/docs/trilhadeestudo/diario-de-bordo-v1/visao-geral/#oltp--olap">&lt;strong>OLAP&lt;/strong>&lt;/a>
, neste cenário observa-se dados centrais (os fatos ou métricas) que serão consultados sob diversas perspectivas (as dimensões ou parâmetros) criando a abstração do cubo de dados, conforme figura abaixo:&lt;/p>
&lt;div class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 515px">
&lt;img class="card-img-top" src="https://sandrorgguimaraes.github.io/docs/trilhadeestudo/diario-de-bordo-v1/modelagem/cubo_huca529dfab1b93f0e98f87087bbaf60a9_18075_505x317_fill_q75_box_smart1.jpg" width="505" height="317">
&lt;div class="card-body px-0 pt-2 pb-0">
&lt;p class="card-text">
Fonte: http://www.devmedia.com.br/parceiros/fig02.jpg
&lt;/p>
&lt;/div>
&lt;/div>
&lt;p>Conceitualmente uma base de dados multidimensional é representada pelo cubo de dados; mas partindo para o modelo lógico e físico a forma mais simples de representar uma base de dados multidimensional é a figura abaixo:&lt;/p>
&lt;h2 id="modelo-estrela--floco-de-neve">Modelo Estrela | Floco de Neve&lt;/h2>
&lt;div class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 515px">
&lt;img class="card-img-top" src="https://sandrorgguimaraes.github.io/docs/trilhadeestudo/diario-de-bordo-v1/modelagem/estrutura-modelo-estrela_hu4b783ad7c0e0a8c4e3c84b5f6cc2e852_11856_505x317_fill_box_smart1_3.png" width="505" height="317">
&lt;div class="card-body px-0 pt-2 pb-0">
&lt;p class="card-text">
Fonte: http://www.ime.usp.br/~jef/apostila.pdf
&lt;/p>
&lt;/div>
&lt;/div>
&lt;p>Essencialmente teremos no centro do modelo uma ou mais &amp;ldquo;tabelas fatos&amp;rdquo; contendo de 0 (zero) à n (várias) métricas cada tabela e nas bordas teremos pelo menos 1 (uma) &amp;ldquo;tabela dimensão&amp;rdquo; podendo ter quantas forem necessárias.&lt;/p>
&lt;p>Durante o processo de modelagem da base de dados multidimensional, os itens abaixo devem ser analisados cuidadosamente:&lt;/p>
&lt;ul>
&lt;li>Escopo;&lt;/li>
&lt;li>Granularidade;&lt;/li>
&lt;li>Dimensões e;&lt;/li>
&lt;li>Métricas;&lt;/li>
&lt;/ul>
&lt;p>Por último deve-se definir o esquema que será utilizado: Estrela ou Floco de neve.&lt;/p>
&lt;h3 id="escopo">Escopo&lt;/h3>
&lt;p>A experiência e o conhecimento do analista de &lt;a href="https://sandrorgguimaraes.github.io/docs/trilhadeestudo/diario-de-bordo-v1/visao-geral/#sad-sistema-de-apoio-%c3%a0-decis%c3%a3o">&lt;strong>SAD&lt;/strong>&lt;/a>
sobre o negócio é fundamental para a correta definição do escopo de um projeto de &lt;strong>DW&lt;/strong>.&lt;/p>
&lt;p>É imprescindível ter uma visão do que é importante para o negócio, ou melhor, saber que &lt;strong>informação&lt;/strong> será necessária extrair dos &lt;strong>dados&lt;/strong> armazenados no &lt;strong>DW&lt;/strong> para que a organização obtenha algum &lt;strong>conhecimento&lt;/strong> novo e a partir deste ponto os gestores possam tomar as &lt;strong>decisões&lt;/strong> mais acertadas.&lt;/p>
&lt;p>Vale lembrar que cada projeto é único e portanto deve ser analisado individualmente e que muitas variáveis influenciam as decisões, por exemplo: tempo para implantação, custo, capital humano e recursos tecnológicos disponíveis, etc.&lt;/p>
&lt;p>Estes dentre outros fatores influenciarão na escolha de um dos dois paradigmas que envolvem os projetos de &lt;strong>DW&lt;/strong> que são as propostas de &lt;a href="https://en.wikipedia.org/wiki/Bill_Inmon" target="_blank" rel="noopener">&lt;em>Inmon&lt;/em>&lt;/a>
e &lt;a href="https://pt.wikipedia.org/wiki/Ralph_Kimball" target="_blank" rel="noopener">&lt;em>Kimball&lt;/em>&lt;/a>
.&lt;/p>
&lt;p>&lt;em>Inmon&lt;/em> propõe que o projeto do &lt;strong>DW&lt;/strong> deve partir do &lt;strong>DW corporativo&lt;/strong> para depois desmembrar nos &lt;strong>DM departamentais&lt;/strong> com isto ganha-se na consistência dos dados armazenados mas o tempo para a obtenção de resultados práticos aumenta, em contrapartida &lt;em>Kimball&lt;/em> propõe o caminho inverso, partir de &lt;strong>DM departamentais&lt;/strong> para o &lt;strong>DW corporativo&lt;/strong> buscando observar à consistência das informações, neste processo os resultados aparecem mais rapidamente porém o risco de inconsistência aumenta.&lt;/p>
&lt;p>O bom senso entre as pessoas envolvidas sempre deve ser levado em conta no momento da decisão do projeto, para se buscar um equilibrio entre o melhor dos dois mundos.&lt;/p>
&lt;h3 id="granularidade">Granularidade&lt;/h3>
&lt;p>Durante o desenho da solução o analista de &lt;a href="https://sandrorgguimaraes.github.io/docs/trilhadeestudo/diario-de-bordo-v1/visao-geral/#sad-sistema-de-apoio-%c3%a0-decis%c3%a3o">&lt;strong>SAD&lt;/strong>&lt;/a>
define quais métricas serão armazenadas nas tabelas fatos e quais parametros serão armazenados nas tabelas dimensões, observe a figura abaixo.&lt;/p>
&lt;div class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 446px">
&lt;img class="card-img-top" src="https://sandrorgguimaraes.github.io/docs/trilhadeestudo/diario-de-bordo-v1/modelagem/modelo-dimensional_hufaf8da8b85f00f88d81b9b1912e5c77f_33611_436x217_fill_box_smart1_3.png" width="436" height="217">
&lt;div class="card-body px-0 pt-2 pb-0">
&lt;p class="card-text">
Fonte: http://hub05.neogrid.com.br/Docs/help/pt_BR/release_notes.htm
&lt;/p>
&lt;/div>
&lt;/div>
&lt;p>A definição correta da granularidade de uma tabela fato implica no desempenho das consultas &lt;a href="https://sandrorgguimaraes.github.io/docs/trilhadeestudo/diario-de-bordo-v1/visao-geral/#oltp--olap">&lt;strong>OLAP&lt;/strong>&lt;/a>
, tomando como base o modelo proposto imagine os seguintes cenários:&lt;/p>
&lt;ul>
&lt;li>Poucas lojas e pouca abrangência (poucos CEP´s);&lt;/li>
&lt;li>Muitas lojas e pouca abrangência (poucos CEP´s);&lt;/li>
&lt;li>Poucas lojas e abrangência nacional;&lt;/li>
&lt;li>Muitas lojas e abrangência nacional;&lt;/li>
&lt;/ul>
&lt;p>É de se concordar que o volume de dados armazenados na tabela fato na última situação poderá chegar a bilhões de registros, podendo impactar no desempenho das consultas que não necessitem de um detalhamento maior.&lt;/p>
&lt;p>Nestes casos uma alternativa é quebrar a tabela fato em domínios menores, onde além de uma tabela com o nível máximo de detalhes existiriam outras tabelas sumarizadas por cidade ou estado por exemplo.&lt;/p>
&lt;blockquote>
&lt;p>No geral para granularidades distintas teremos tabelas fatos distintas.&lt;/p>
&lt;/blockquote>
&lt;h3 id="dimensões">Dimensões&lt;/h3>
&lt;p>Vamos falar um pouco sobre a tabela &amp;ldquo;dimensão&amp;rdquo;, um item importante na modelagem multidimensional e que tem algumas caracteristicas próprias que devemos observar:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Projete a tabela dimensão na perspectivas do usuário&lt;/strong>. Utilize textos descritivos e códigos que sejam de fácil entendimento do usuário final, não tente economizar alguns bytes neste quesito.&lt;/li>
&lt;li>&lt;strong>Evite utilizar técnicas de normalização dos dados&lt;/strong>. Esta técnica aumenta a complexidade das consultas, impactando no desempenho, além de não compensar a economia de espaço obtida.&lt;/li>
&lt;li>&lt;strong>Utilize uma chave primária genérica e simples&lt;/strong>. Este procedimento evita problemas de atualização que surgem aos utilizar, por exemplo, o próprio código do cliente ou produto como chave primária, além de proporcionar um melhor desempenho na utilização dos índices.&lt;/li>
&lt;li>&lt;strong>Utilize múltiplas colunas de atributos&lt;/strong>. Com isto ficará mais fácil identificar a chave em questão.&lt;/li>
&lt;/ul>
&lt;p>Abaixo alguns exemplos de atributos que podem ser utilizados para ajudar a detalhar uma chave facilitando na definição dos parametros da consulta &lt;strong>OLAP&lt;/strong>.&lt;/p>
&lt;p>&lt;strong>Atributos estruturais para relacionamentos pai-filho;&lt;/strong>&lt;/p>
&lt;div class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 516px">
&lt;img class="card-img-top" src="https://sandrorgguimaraes.github.io/docs/trilhadeestudo/diario-de-bordo-v1/modelagem/atributos-estruturais_hud3a2b7ae5021858728979b6c9b55e5d1_17283_506x302_fill_box_smart1_3.png" width="506" height="302">
&lt;div class="card-body px-0 pt-2 pb-0">
&lt;p class="card-text">
Fonte: HARRISON, Thomas H. Intranet Data Warehouse. São Paulo, Berkeley, 1998. 362 p.
&lt;/p>
&lt;/div>
&lt;/div>
&lt;p>&lt;strong>Atributos para definição de nível;&lt;/strong>
&lt;div class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 307px">
&lt;img class="card-img-top" src="https://sandrorgguimaraes.github.io/docs/trilhadeestudo/diario-de-bordo-v1/modelagem/atributos-nivel_huc1e3fa069c2cf20085f60789a6e2e408_5577_297x203_fill_box_smart1_3.png" width="297" height="203">
&lt;div class="card-body px-0 pt-2 pb-0">
&lt;p class="card-text">
Fonte: HARRISON, Thomas H. Intranet Data Warehouse. São Paulo, Berkeley, 1998. 362 p.
&lt;/p>
&lt;/div>
&lt;/div>&lt;/p>
&lt;p>&lt;strong>Atributos tipo &amp;ldquo;flag&amp;rdquo; de resolução e/ou de seqüência;&lt;/strong>
&lt;div class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 439px">
&lt;img class="card-img-top" src="https://sandrorgguimaraes.github.io/docs/trilhadeestudo/diario-de-bordo-v1/modelagem/atributos-flag-resolucao-sequencia_hub9c292590af1e390da556a42d5408469_9249_429x196_fill_box_smart1_3.png" width="429" height="196">
&lt;div class="card-body px-0 pt-2 pb-0">
&lt;p class="card-text">
Fonte: HARRISON, Thomas H. Intranet Data Warehouse. São Paulo, Berkeley, 1998. 362 p.
&lt;/p>
&lt;/div>
&lt;/div>&lt;/p>
&lt;h3 id="métricas">Métricas&lt;/h3>
&lt;p>Agora vamos aos &amp;ldquo;fatos&amp;rdquo;, às &amp;ldquo;métricas&amp;rdquo;, ao centro das atenções, pois são as tabelas fatos que irão guardar no data warehouse a respota para todas as questões.&lt;/p>
&lt;p>É na tabela fato que o analista de &lt;strong>SAD&lt;/strong> armazenará as métricas do negócio, possibilitando recuperar dados quantitativos e responder por exemplo quanto foi vendido de um determinado produto? em determinada época? em determinado local? dentre outras questões.&lt;/p>
&lt;p>Os fatos ou métricas armazenadas podem ser de três tipos:&lt;/p>
&lt;ul>
&lt;li>&lt;strong>Aditivas&lt;/strong>: São as métricas que podem ser sumarizadas adicionando seus valores ao longo do tempo. Por exemplo o valor, o custo e/ou a quantidade de um pedido podem ser somados independente das combinações dos parametros das dimensões;&lt;/li>
&lt;li>&lt;strong>Não-aditivas&lt;/strong>: É o inverso das aditivas, por exemplo valores percentuais (no geral não são somados) e como normalmente são derivadas de outras métricas aditivas, fica mais prático calcular em tempo de execução do que armazenar estas métricas.&lt;/li>
&lt;li>&lt;strong>Semi-aditiva&lt;/strong>: Estas métricas podem ser sumarizadas apenas em algumas dimensões, como exemplo temos o saldo de uma conta corrente, que pode ser sumarizada na dimensão cliente, na dimensão agência mas não faz sentido somar o saldo da conta ao longo do tempo.&lt;/li>
&lt;/ul>
&lt;p>Ampliando esta questão dos tipos de métricas, temos o exemplo da temperatura (métrica não-aditiva) e do saldo da conta (métrica semi-aditiva) que não faz sentido somar, mas podemos utilizar outras operações como média, máximo e mínimo;&lt;/p>
&lt;p>Normalmente na tabela fato a chave primária (&lt;strong>PK&lt;/strong>) é composta, sendo que cada elemento é uma chave estrangeira (&lt;strong>FK&lt;/strong>) vinculada à uma tabela dimensão, sendo que a dimensão tempo sempre faz parte deste conjunto.&lt;/p>
&lt;p>Em alguns casos podemos ter uma tabela sem fato, onde apenas a relação entre as dimensões já é o suficiente para a área de negócios, conforme o exemplo:&lt;/p>
&lt;div class="card rounded p-2 td-post-card mb-4 mt-4" style="max-width: 529px">
&lt;img class="card-img-top" src="https://sandrorgguimaraes.github.io/docs/trilhadeestudo/diario-de-bordo-v1/modelagem/tabela-sem-fato_hu333bd08d2784cdc2113d0b0a1b107dd4_79229_519x369_fill_box_smart1_3.png" width="519" height="369">
&lt;div class="card-body px-0 pt-2 pb-0">
&lt;p class="card-text">
&lt;/p>
&lt;/div>
&lt;/div></description></item></channel></rss>